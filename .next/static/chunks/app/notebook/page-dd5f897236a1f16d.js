(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[570],{8644:function(e,t,n){Promise.resolve().then(n.bind(n,1475))},1475:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return l}});var a=n(587),r=n(5587),i=n(9330),o=n(6783),s=n(3379);function l(){let e=(0,i.useRouter)(),[t,n]=(0,r.useState)([]),[l,c]=(0,r.useState)({title:"",content:"",category:"ideas",tagInput:""}),[d,u]=(0,r.useState)("all"),[h,f]=(0,r.useState)(null),[g,p]=(0,r.useState)(null),[m,y]=(0,r.useState)(!0),[x,b]=(0,r.useState)(0),N=[{id:"ideas",name:"Ideas",emoji:"\uD83D\uDCA1"},{id:"growth",name:"Growth",emoji:"\uD83C\uDF31"},{id:"business",name:"Business",emoji:"\uD83D\uDCBC"},{id:"work",name:"Work",emoji:"\uD83D\uDEE0️"},{id:"personal",name:"Personal",emoji:"\uD83D\uDC64"}];(0,r.useEffect)(()=>{let e=()=>y(navigator.onLine);return e(),window.addEventListener("online",e),window.addEventListener("offline",e),w(),S(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]);let S=()=>{b(s.R.getQueueSize())},w=async()=>{try{let e=await o.h.getNotes();n(e),v(e)}catch(t){console.error("Failed to load notes:",t);let e=localStorage.getItem("fnote_notes");e&&n(JSON.parse(e))}},v=e=>{localStorage.setItem("fnote_notes",JSON.stringify(e))},O=async()=>{if(!l.title.trim()||!l.content.trim())return;let e={title:l.title,content:l.content,category:l.category,tags:l.tagInput.split(",").map(e=>e.trim()).filter(e=>e)},a={id:Date.now().toString(),...e,createdAt:new Date,updatedAt:new Date},r=[a,...t];n(r),v(r);try{if(m)await o.h.createNote(e),w();else throw Error("Offline mode")}catch(t){console.warn("API Sync failed, keeping local and queuing:",t),s.R.addToQueue({type:"CREATE",entityType:"note",entityId:a.id,data:e}),S()}c({title:"",content:"",category:"ideas",tagInput:""})},j=async e=>{let a=t.filter(t=>t.id!==e);n(a),v(a);try{if(m)await o.h.deleteNote(e);else throw Error("Offline mode")}catch(t){s.R.addToQueue({type:"DELETE",entityType:"note",entityId:e,data:{id:e}}),S()}g===e&&p(null)},E=e=>{f(e),c({title:e.title,content:e.content,category:e.category,tagInput:e.tags.join(", ")}),p(null)},D=async()=>{if(!h||!l.title.trim()||!l.content.trim())return;let e={title:l.title,content:l.content,category:l.category,tags:l.tagInput.split(",").map(e=>e.trim()).filter(e=>e)},a=t.map(t=>t.id===h.id?{...t,...e,updatedAt:new Date}:t);n(a),v(a);try{if(m)await o.h.updateNote(h.id,e);else throw Error("Offline mode")}catch(t){s.R.addToQueue({type:"UPDATE",entityType:"note",entityId:h.id,data:e}),S()}f(null),c({title:"",content:"",category:"ideas",tagInput:""})},T=e=>{p(g===e?null:e)},_=async()=>{try{await s.R.syncIfOnline(),S(),w()}catch(e){console.error("Sync failed:",e)}},C="all"===d?t:t.filter(e=>e.category===d);return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#0f2e1f] text-white px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#d4af37]",children:"\uD83D\uDCD3 Notebook"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"Save and organize notes"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,a.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat(m?"bg-green-600":"bg-red-600"),children:m?"\uD83D\uDFE2 Online":"\uD83D\uDD34 Offline"}),x>0&&(0,a.jsxs)("button",{onClick:_,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs flex items-center gap-1",children:["\uD83D\uDD04 Sync Pending (",x,")"]})]})]}),(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"text-gray-400 hover:text-white text-sm",children:"← Back to Dashboard"})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 flex-grow",children:[(0,a.jsx)("div",{className:"lg:w-1/3",children:(0,a.jsxs)("div",{className:"bg-[#143b28] border border-[#1f5a3d] rounded-xl p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[#d4af37]",children:h?"✏️ Edit Note":"➕ Add New Note"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Title",value:l.title,onChange:e=>c({...l,title:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white placeholder-gray-400 focus:outline-none focus:border-[#d4af37]"}),(0,a.jsx)("select",{value:l.category,onChange:e=>c({...l,category:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white focus:outline-none focus:border-[#d4af37]",children:N.map(e=>(0,a.jsxs)("option",{value:e.id,className:"bg-[#143b28]",children:[e.emoji," ",e.name]},e.id))}),(0,a.jsx)("textarea",{placeholder:"Content",value:l.content,onChange:e=>c({...l,content:e.target.value}),rows:5,className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white placeholder-gray-400 focus:outline-none focus:border-[#d4af37]"}),(0,a.jsx)("input",{type:"text",placeholder:"Tags (comma separated)",value:l.tagInput,onChange:e=>c({...l,tagInput:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white placeholder-gray-400 focus:outline-none focus:border-[#d4af37]"}),h?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:D,className:"flex-1 bg-[#d4af37] text-black py-3 rounded-lg font-medium hover:bg-[#c9a633] transition",children:"Update Note"}),(0,a.jsx)("button",{onClick:()=>{f(null),c({title:"",content:"",category:"ideas",tagInput:""})},className:"px-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Cancel"})]}):(0,a.jsx)("button",{onClick:O,disabled:!l.title.trim()||!l.content.trim(),className:"w-full bg-[#d4af37] text-black py-3 rounded-lg font-medium hover:bg-[#c9a633] transition disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Note"})]})]})}),(0,a.jsxs)("div",{className:"lg:w-2/3",children:[(0,a.jsx)("div",{className:"mb-6",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>u("all"),className:"px-4 py-2 rounded-lg ".concat("all"===d?"bg-[#d4af37] text-black":"bg-[#143b28] text-white border border-[#1f5a3d]"),children:"All Notes"}),N.map(e=>(0,a.jsxs)("button",{onClick:()=>u(e.id),className:"px-4 py-2 rounded-lg flex items-center gap-2 ".concat(d===e.id?"bg-[#d4af37] text-black":"bg-[#143b28] text-white border border-[#1f5a3d]"),children:[(0,a.jsx)("span",{children:e.emoji}),(0,a.jsx)("span",{children:e.name})]},e.id))]})}),(0,a.jsx)("div",{className:"space-y-3",children:0===C.length?(0,a.jsx)("div",{className:"bg-[#143b28] border border-[#1f5a3d] rounded-xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-300",children:"No notes yet"})}):C.map(e=>{let t=N.find(t=>t.id===e.category),n=g===e.id;return(0,a.jsxs)("div",{className:"bg-[#143b28] border border-[#1f5a3d] rounded-xl p-4 hover:border-[#d4af37] transition-colors",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4 flex-1",children:[(0,a.jsx)("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center ".concat((null==t?void 0:t.id)==="ideas"?"bg-blue-500/20":(null==t?void 0:t.id)==="growth"?"bg-green-500/20":(null==t?void 0:t.id)==="business"?"bg-purple-500/20":(null==t?void 0:t.id)==="work"?"bg-yellow-500/20":"bg-pink-500/20"),children:(0,a.jsx)("span",{className:"text-lg",children:null==t?void 0:t.emoji})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-white",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,a.jsx)("span",{className:"text-sm text-gray-300",children:new Date(e.createdAt).toLocaleDateString()}),e.tags.length>0&&(0,a.jsxs)("span",{className:"text-sm text-gray-400",children:[e.tags.length," tags"]})]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)("button",{onClick:()=>T(e.id),className:"px-3 py-1 rounded-lg text-sm transition ".concat(n?"bg-gray-600":"bg-emerald-600"," text-white"),children:n?"Close":"View"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>E(e),className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm flex-1",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>j(e.id),className:"px-3 py-1 bg-red-600 text-white rounded-lg text-sm flex-1",children:"Delete"})]})]})]}),n&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-[#1f5a3d]",children:(0,a.jsx)("div",{className:"bg-[#0f2e1f] rounded-lg p-4",children:(0,a.jsx)("p",{className:"text-gray-300 whitespace-pre-line",children:e.content})})})]},e.id)})})]})]})]})}},6783:function(e,t,n){"use strict";n.d(t,{h:function(){return a}});let a=new class{isOnline(){return"undefined"!=typeof navigator&&navigator.onLine}getCurrentUser(){let e=localStorage.getItem("fnote_user");return e?JSON.parse(e):null}async fetchWithOfflineSupport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isOnline())throw Error("Offline: Please check your internet connection");let n=this.getCurrentUser(),a={"Content-Type":"application/json",...n&&{"x-user-data":JSON.stringify(n)},...t.headers};try{let n=await fetch("".concat("/api").concat(e),{...t,headers:a});if(!n.ok)throw Error("API error: ".concat(n.status));return n.json()}catch(e){throw console.error("API request failed:",e),e}}async login(e,t){return this.fetchWithOfflineSupport("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getNotes(){return this.fetchWithOfflineSupport("/notes")}async createNote(e){return this.fetchWithOfflineSupport("/notes",{method:"POST",body:JSON.stringify(e)})}async updateNote(e,t){return this.fetchWithOfflineSupport("/notes?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteNote(e){await this.fetchWithOfflineSupport("/notes?id=".concat(e),{method:"DELETE"})}async getGoals(e,t){let n=new URLSearchParams;e&&n.append("type",e),void 0!==t&&n.append("parentId",t||"null");let a=n.toString()?"?".concat(n.toString()):"";return this.fetchWithOfflineSupport("/goals".concat(a))}async createGoal(e){return this.fetchWithOfflineSupport("/goals",{method:"POST",body:JSON.stringify(e)})}async updateGoal(e,t){return this.fetchWithOfflineSupport("/goals?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteGoal(e){await this.fetchWithOfflineSupport("/goals?id=".concat(e),{method:"DELETE"})}async getPlanner(e){return this.fetchWithOfflineSupport("/planner".concat(e?"?date=".concat(e):""))}async savePlanner(e){return this.fetchWithOfflineSupport("/planner",{method:"POST",body:JSON.stringify(e)})}async updatePlanner(e,t){return this.fetchWithOfflineSupport("/planner?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deletePlanner(e){await this.fetchWithOfflineSupport("/planner?id=".concat(e),{method:"DELETE"})}async getThoughts(e,t){let n=new URLSearchParams;e&&n.append("date",e),t&&n.append("type",t);let a=n.toString()?"?".concat(n.toString()):"";return this.fetchWithOfflineSupport("/thoughts".concat(a))}async createThought(e){return this.fetchWithOfflineSupport("/thoughts",{method:"POST",body:JSON.stringify(e)})}async updateThought(e,t){return this.fetchWithOfflineSupport("/thoughts?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteThought(e){await this.fetchWithOfflineSupport("/thoughts?id=".concat(e),{method:"DELETE"})}async getLearnedItems(e,t){let n=new URLSearchParams;e&&n.append("date",e),t&&n.append("category",t);let a=n.toString()?"?".concat(n.toString()):"";return this.fetchWithOfflineSupport("/learned".concat(a))}async createLearnedItem(e){return this.fetchWithOfflineSupport("/learned",{method:"POST",body:JSON.stringify(e)})}async updateLearnedItem(e,t){return this.fetchWithOfflineSupport("/learned?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteLearnedItem(e){await this.fetchWithOfflineSupport("/learned?id=".concat(e),{method:"DELETE"})}}},3379:function(e,t,n){"use strict";n.d(t,{R:function(){return a}});let a=new class{addToQueue(e){let t=this.getQueue(),n={id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:Date.now(),retries:0,...e};t.push(n),this.saveQueue(t),console.log("Added to sync queue:",n)}getQueue(){let e=localStorage.getItem(this.SYNC_QUEUE_KEY);return e?JSON.parse(e):[]}saveQueue(e){localStorage.setItem(this.SYNC_QUEUE_KEY,JSON.stringify(e))}async syncIfOnline(){if(!navigator.onLine)return;let e=this.getQueue();if(0!==e.length)for(let t of(console.log("Syncing",e.length,"pending operations..."),[...e]))try{await this.processOperation(t);let e=this.getQueue().filter(e=>e.id!==t.id);this.saveQueue(e)}catch(e){if(console.error("Failed to sync operation:",t.id,e),t.retries+=1,t.retries>=this.MAX_RETRIES){console.warn("Max retries reached for operation:",t.id);let e=this.getQueue().filter(e=>e.id!==t.id);this.saveQueue(e)}else{let e=this.getQueue().map(e=>e.id===t.id?t:e);this.saveQueue(e)}}}async processOperation(e){console.log("Processing operation:",e),await new Promise(e=>setTimeout(e,100))}clearQueue(){localStorage.removeItem(this.SYNC_QUEUE_KEY)}getQueueSize(){return this.getQueue().length}constructor(){this.SYNC_QUEUE_KEY="fnote_sync_queue",this.MAX_RETRIES=3}};window.addEventListener("online",()=>{console.log("Back online, syncing..."),a.syncIfOnline()}),window.addEventListener("offline",()=>{console.log("Offline mode")})},2941:function(e,t,n){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(5587),r=Symbol.for("react.element"),i=Symbol.for("react.fragment"),o=Object.prototype.hasOwnProperty,s=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var a,i={},c=null,d=null;for(a in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)o.call(t,a)&&!l.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:r,type:e,key:c,ref:d,props:i,_owner:s.current}}t.Fragment=i,t.jsx=c,t.jsxs=c},587:function(e,t,n){"use strict";e.exports=n(2941)},9330:function(e,t,n){e.exports=n(859)}},function(e){e.O(0,[399,258,744],function(){return e(e.s=8644)}),_N_E=e.O()}]);