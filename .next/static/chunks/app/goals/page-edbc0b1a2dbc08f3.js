(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{2071:function(e,t,r){Promise.resolve().then(r.bind(r,4141))},4141:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return o}});var a=r(587),n=r(5587),l=r(9330),s=r(6783),i=r(3379);function o(){let e=(0,l.useRouter)(),[t,r]=(0,n.useState)([]),[o,d]=(0,n.useState)({title:"",description:"",type:"yearly",targetDate:new Date().toISOString().split("T")[0],progress:0,parentId:null,periodLabel:""}),[c,u]=(0,n.useState)("all"),[p,h]=(0,n.useState)(null),[f,g]=(0,n.useState)(null),[y,x]=(0,n.useState)(null),[m,b]=(0,n.useState)(!0),[S,w]=(0,n.useState)(0),[N,v]=(0,n.useState)(!0),j=[{id:"yearly",name:"Yearly",emoji:"\uD83D\uDCC5",color:"bg-purple-600/20 border-purple-500/30 text-purple-400",childType:"quarterly"},{id:"quarterly",name:"Quarterly",emoji:"\uD83C\uDFAF",color:"bg-blue-600/20 border-blue-500/30 text-blue-400",childType:"monthly"},{id:"monthly",name:"Monthly",emoji:"\uD83D\uDCCA",color:"bg-emerald-600/20 border-emerald-500/30 text-emerald-400",childType:"weekly"},{id:"weekly",name:"Weekly",emoji:"\uD83D\uDDD3️",color:"bg-amber-600/20 border-amber-500/30 text-amber-400",childType:null}];(0,n.useEffect)(()=>{let e=()=>b(navigator.onLine);return e(),window.addEventListener("online",e),window.addEventListener("offline",e),D(),O(),()=>{window.removeEventListener("online",e),window.removeEventListener("offline",e)}},[]);let O=()=>{w(i.R.getQueueSize())},D=async()=>{v(!0);try{let e=await s.h.getGoals();r(e),E(e)}catch(t){console.error("Failed to load goals:",t);let e=localStorage.getItem("fnote_goals");e&&r(JSON.parse(e))}finally{v(!1)}},E=e=>{localStorage.setItem("fnote_goals",JSON.stringify(e))},T=(e,t)=>{let r=new Date(t);switch(e){case"yearly":return r.getFullYear().toString();case"quarterly":let a=Math.floor(r.getMonth()/3)+1;return"Q".concat(a," ").concat(r.getFullYear());case"monthly":return r.toLocaleString("default",{month:"long"})+" "+r.getFullYear();case"weekly":let n=Math.ceil(r.getDate()/7);return"Week ".concat(n,", ").concat(r.toLocaleString("default",{month:"short"})," ").concat(r.getFullYear());default:return""}},I=e=>0===e?"not-started":100===e?"completed":"in-progress",k=async()=>{if(!o.title.trim()||!o.targetDate)return;let e=o.periodLabel||T(o.type,o.targetDate),a=I(o.progress),n={title:o.title,description:o.description,type:o.type,targetDate:o.targetDate,progress:o.progress,status:a,parentId:o.parentId,periodLabel:e},l={id:Date.now().toString(),...n,createdAt:new Date},c=[l,...t];r(c),E(c);try{if(m)await s.h.createGoal(n),D();else throw Error("Offline")}catch(e){console.warn("Goal API sync failed, queuing:",e),i.R.addToQueue({type:"CREATE",entityType:"goal",entityId:l.id,data:n}),O()}d({title:"",description:"",type:"yearly",targetDate:new Date().toISOString().split("T")[0],progress:0,parentId:null,periodLabel:""}),g(null)},C=async e=>{let a=t.filter(t=>t.id!==e);r(a),E(a);try{if(m)await s.h.deleteGoal(e);else throw Error("Offline")}catch(t){i.R.addToQueue({type:"DELETE",entityType:"goal",entityId:e,data:{id:e}}),O()}y===e&&x(null)},L=e=>{h(e),d({title:e.title,description:e.description,type:e.type,targetDate:e.targetDate.split("T")[0],progress:e.progress,parentId:e.parentId,periodLabel:e.periodLabel}),e.parentId&&g(e.parentId)},_=async()=>{if(!p||!o.title.trim()||!o.targetDate)return;let e=o.periodLabel||T(o.type,o.targetDate),a=I(o.progress),n={title:o.title,description:o.description,type:o.type,targetDate:o.targetDate,progress:o.progress,status:a,parentId:o.parentId,periodLabel:e},l=t.map(e=>e.id===p.id?{...e,...n}:e);r(l),E(l);try{if(m)await s.h.updateGoal(p.id,n);else throw Error("Offline")}catch(e){i.R.addToQueue({type:"UPDATE",entityType:"goal",entityId:p.id,data:n}),O()}h(null),d({title:"",description:"",type:"yearly",targetDate:new Date().toISOString().split("T")[0],progress:0,parentId:null,periodLabel:""}),g(null)},P=e=>{x(y===e?null:e)},Q=async()=>{try{await i.R.syncIfOnline(),O(),D()}catch(e){console.error("Sync failed:",e)}},W=()=>t.filter(e=>!e.parentId),U=e=>t.filter(t=>t.parentId===e),R="all"===c?W():W().filter(e=>e.type===c),G=e=>0===e?"bg-gray-600":e<30?"bg-red-600":e<70?"bg-yellow-600":"bg-green-600",J=e=>{switch(e){case"not-started":default:return"bg-gray-500";case"in-progress":return"bg-blue-500";case"completed":return"bg-green-500"}};return(0,a.jsxs)("div",{className:"min-h-screen flex flex-col bg-[#0f2e1f] text-white px-4 py-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold text-[#d4af37]",children:"\uD83C\uDFAF Goals"}),(0,a.jsx)("p",{className:"text-gray-300 text-sm",children:"Set and track your goals"}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mt-2",children:[(0,a.jsx)("div",{className:"px-2 py-1 rounded text-xs ".concat(m?"bg-green-600":"bg-red-600"),children:m?"\uD83D\uDFE2 Online":"\uD83D\uDD34 Offline"}),S>0&&(0,a.jsxs)("button",{onClick:Q,className:"px-2 py-1 bg-blue-600 hover:bg-blue-700 rounded text-xs flex items-center gap-1",children:["\uD83D\uDD04 Sync Pending (",S,")"]})]})]}),(0,a.jsx)("button",{onClick:()=>e.push("/dashboard"),className:"text-gray-400 hover:text-white text-sm",children:"← Back to Dashboard"})]}),(0,a.jsxs)("div",{className:"flex flex-col lg:flex-row gap-6 flex-grow",children:[(0,a.jsx)("div",{className:"lg:w-1/3",children:(0,a.jsxs)("div",{className:"bg-[#143b28] border border-[#1f5a3d] rounded-xl p-6",children:[(0,a.jsx)("h2",{className:"text-xl font-semibold mb-4 text-[#d4af37]",children:p?"✏️ Edit Goal":"➕ Add New Goal"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("input",{type:"text",placeholder:"Goal Title",value:o.title,onChange:e=>d({...o,title:e.target.value}),className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white placeholder-gray-400 focus:outline-none focus:border-[#d4af37]"}),(0,a.jsx)("textarea",{placeholder:"Description (optional)",value:o.description,onChange:e=>d({...o,description:e.target.value}),rows:3,className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white placeholder-gray-400 focus:outline-none focus:border-[#d4af37]"}),(0,a.jsx)("select",{value:o.type,onChange:e=>{let t=e.target.value;d({...o,type:t,periodLabel:T(t,o.targetDate)})},className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white focus:outline-none focus:border-[#d4af37]",children:j.map(e=>(0,a.jsxs)("option",{value:e.id,className:"bg-[#143b28]",children:[e.emoji," ",e.name]},e.id))}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Target Date"}),(0,a.jsx)("input",{type:"date",value:o.targetDate,onChange:e=>{d({...o,targetDate:e.target.value,periodLabel:T(o.type,e.target.value)})},className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white focus:outline-none focus:border-[#d4af37]"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm text-gray-300 mb-2",children:["Progress: ",o.progress,"%"]}),(0,a.jsx)("input",{type:"range",min:"0",max:"100",value:o.progress,onChange:e=>d({...o,progress:parseInt(e.target.value)}),className:"w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm text-gray-300 mb-2",children:"Parent Goal (optional)"}),(0,a.jsxs)("select",{value:f||"",onChange:e=>{let t=e.target.value||null;g(t),d({...o,parentId:t})},className:"w-full px-4 py-3 rounded-lg bg-[#0f2e1f] border border-[#1f5a3d] text-white focus:outline-none focus:border-[#d4af37]",children:[(0,a.jsx)("option",{value:"",children:"No parent"}),t.filter(e=>{var t;return e.type===(null===(t=j.find(e=>e.id===o.type))||void 0===t?void 0:t.childType)}).map(e=>(0,a.jsx)("option",{value:e.id,className:"bg-[#143b28]",children:e.title},e.id))]})]}),p?(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:_,className:"flex-1 bg-[#d4af37] text-black py-3 rounded-lg font-medium hover:bg-[#c9a633] transition",children:"Update Goal"}),(0,a.jsx)("button",{onClick:()=>{h(null),d({title:"",description:"",type:"yearly",targetDate:new Date().toISOString().split("T")[0],progress:0,parentId:null,periodLabel:""}),g(null)},className:"px-4 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition",children:"Cancel"})]}):(0,a.jsx)("button",{onClick:k,disabled:!o.title.trim()||!o.targetDate,className:"w-full bg-[#d4af37] text-black py-3 rounded-lg font-medium hover:bg-[#c9a633] transition disabled:opacity-50",children:"Save Goal"})]})]})}),(0,a.jsxs)("div",{className:"lg:w-2/3",children:[(0,a.jsxs)("div",{className:"mb-6 flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>u("all"),className:"px-4 py-2 rounded-lg ".concat("all"===c?"bg-[#d4af37] text-black":"bg-[#143b28] text-white border border-[#1f5a3d]"),children:"All Goals"}),j.map(e=>(0,a.jsxs)("button",{onClick:()=>u(e.id),className:"px-4 py-2 rounded-lg flex items-center gap-2 ".concat(c===e.id?"bg-[#d4af37] text-black":"bg-[#143b28] text-white border border-[#1f5a3d]"),children:[(0,a.jsx)("span",{children:e.emoji}),(0,a.jsx)("span",{children:e.name})]},e.id))]}),(0,a.jsx)("div",{className:"space-y-4",children:N?(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("div",{className:"inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-[#d4af37]"})}):0===R.length?(0,a.jsx)("div",{className:"bg-[#143b28] border border-[#1f5a3d] rounded-xl p-8 text-center",children:(0,a.jsx)("p",{className:"text-gray-300",children:"No goals yet"})}):R.map(e=>{let t=U(e.id),r=y===e.id,n=j.find(t=>t.id===e.type);return(0,a.jsxs)("div",{className:"bg-[#143b28] border border-[#1f5a3d] rounded-xl p-4",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3 mb-2",children:[(0,a.jsxs)("div",{className:"px-3 py-1 rounded-lg ".concat(null==n?void 0:n.color," border flex items-center gap-2"),children:[(0,a.jsx)("span",{children:null==n?void 0:n.emoji}),(0,a.jsx)("span",{className:"text-sm font-medium",children:null==n?void 0:n.name})]}),(0,a.jsx)("span",{className:"text-sm text-gray-300",children:e.periodLabel}),(0,a.jsx)("span",{className:"px-2 py-1 text-xs rounded ".concat(J(e.status)),children:e.status.replace("-"," ")})]}),(0,a.jsx)("h3",{className:"text-lg font-semibold text-white mb-1",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center gap-4 mb-3",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("div",{className:"h-2 bg-gray-700 rounded-full overflow-hidden",children:(0,a.jsx)("div",{className:"h-full ".concat(G(e.progress)," transition-all duration-300"),style:{width:"".concat(e.progress,"%")}})})}),(0,a.jsxs)("span",{className:"text-sm text-gray-300",children:[e.progress,"%"]})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-2 ml-4",children:[t.length>0&&(0,a.jsxs)("button",{onClick:()=>P(e.id),className:"px-3 py-1 bg-gray-600 text-white rounded-lg text-sm",children:[r?"Hide":"Show"," Children (",t.length,")"]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>L(e),className:"px-3 py-1 bg-blue-600 text-white rounded-lg text-sm flex-1",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>C(e.id),className:"px-3 py-1 bg-red-600 text-white rounded-lg text-sm flex-1",children:"Delete"})]})]})]}),r&&t.length>0&&(0,a.jsx)("div",{className:"mt-4 pt-4 border-t border-[#1f5a3d] space-y-3",children:t.map(e=>(0,a.jsxs)("div",{className:"bg-[#0f2e1f] rounded-lg p-3 flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h5",{className:"text-white font-medium",children:e.title}),(0,a.jsxs)("div",{className:"text-xs text-gray-300",children:["Progress: ",e.progress,"%"]})]}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:()=>L(e),className:"px-2 py-1 bg-blue-600 text-white rounded text-xs",children:"Edit"}),(0,a.jsx)("button",{onClick:()=>C(e.id),className:"px-2 py-1 bg-red-600 text-white rounded text-xs",children:"Delete"})]})]},e.id))})]},e.id)})})]})]})]})}},6783:function(e,t,r){"use strict";r.d(t,{h:function(){return a}});let a=new class{isOnline(){return"undefined"!=typeof navigator&&navigator.onLine}getCurrentUser(){let e=localStorage.getItem("fnote_user");return e?JSON.parse(e):null}async fetchWithOfflineSupport(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isOnline())throw Error("Offline: Please check your internet connection");let r=this.getCurrentUser(),a={"Content-Type":"application/json",...r&&{"x-user-data":JSON.stringify(r)},...t.headers};try{let r=await fetch("".concat("/api").concat(e),{...t,headers:a});if(!r.ok)throw Error("API error: ".concat(r.status));return r.json()}catch(e){throw console.error("API request failed:",e),e}}async login(e,t){return this.fetchWithOfflineSupport("/auth/login",{method:"POST",body:JSON.stringify({email:e,password:t})})}async getNotes(){return this.fetchWithOfflineSupport("/notes")}async createNote(e){return this.fetchWithOfflineSupport("/notes",{method:"POST",body:JSON.stringify(e)})}async updateNote(e,t){return this.fetchWithOfflineSupport("/notes?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteNote(e){await this.fetchWithOfflineSupport("/notes?id=".concat(e),{method:"DELETE"})}async getGoals(e,t){let r=new URLSearchParams;e&&r.append("type",e),void 0!==t&&r.append("parentId",t||"null");let a=r.toString()?"?".concat(r.toString()):"";return this.fetchWithOfflineSupport("/goals".concat(a))}async createGoal(e){return this.fetchWithOfflineSupport("/goals",{method:"POST",body:JSON.stringify(e)})}async updateGoal(e,t){return this.fetchWithOfflineSupport("/goals?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteGoal(e){await this.fetchWithOfflineSupport("/goals?id=".concat(e),{method:"DELETE"})}async getPlanner(e){return this.fetchWithOfflineSupport("/planner".concat(e?"?date=".concat(e):""))}async savePlanner(e){return this.fetchWithOfflineSupport("/planner",{method:"POST",body:JSON.stringify(e)})}async updatePlanner(e,t){return this.fetchWithOfflineSupport("/planner?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deletePlanner(e){await this.fetchWithOfflineSupport("/planner?id=".concat(e),{method:"DELETE"})}async getThoughts(e,t){let r=new URLSearchParams;e&&r.append("date",e),t&&r.append("type",t);let a=r.toString()?"?".concat(r.toString()):"";return this.fetchWithOfflineSupport("/thoughts".concat(a))}async createThought(e){return this.fetchWithOfflineSupport("/thoughts",{method:"POST",body:JSON.stringify(e)})}async updateThought(e,t){return this.fetchWithOfflineSupport("/thoughts?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteThought(e){await this.fetchWithOfflineSupport("/thoughts?id=".concat(e),{method:"DELETE"})}async getLearnedItems(e,t){let r=new URLSearchParams;e&&r.append("date",e),t&&r.append("category",t);let a=r.toString()?"?".concat(r.toString()):"";return this.fetchWithOfflineSupport("/learned".concat(a))}async createLearnedItem(e){return this.fetchWithOfflineSupport("/learned",{method:"POST",body:JSON.stringify(e)})}async updateLearnedItem(e,t){return this.fetchWithOfflineSupport("/learned?id=".concat(e),{method:"PUT",body:JSON.stringify(t)})}async deleteLearnedItem(e){await this.fetchWithOfflineSupport("/learned?id=".concat(e),{method:"DELETE"})}}},3379:function(e,t,r){"use strict";r.d(t,{R:function(){return a}});let a=new class{addToQueue(e){let t=this.getQueue(),r={id:Date.now().toString()+Math.random().toString(36).substr(2,9),timestamp:Date.now(),retries:0,...e};t.push(r),this.saveQueue(t),console.log("Added to sync queue:",r)}getQueue(){let e=localStorage.getItem(this.SYNC_QUEUE_KEY);return e?JSON.parse(e):[]}saveQueue(e){localStorage.setItem(this.SYNC_QUEUE_KEY,JSON.stringify(e))}async syncIfOnline(){if(!navigator.onLine)return;let e=this.getQueue();if(0!==e.length)for(let t of(console.log("Syncing",e.length,"pending operations..."),[...e]))try{await this.processOperation(t);let e=this.getQueue().filter(e=>e.id!==t.id);this.saveQueue(e)}catch(e){if(console.error("Failed to sync operation:",t.id,e),t.retries+=1,t.retries>=this.MAX_RETRIES){console.warn("Max retries reached for operation:",t.id);let e=this.getQueue().filter(e=>e.id!==t.id);this.saveQueue(e)}else{let e=this.getQueue().map(e=>e.id===t.id?t:e);this.saveQueue(e)}}}async processOperation(e){console.log("Processing operation:",e),await new Promise(e=>setTimeout(e,100))}clearQueue(){localStorage.removeItem(this.SYNC_QUEUE_KEY)}getQueueSize(){return this.getQueue().length}constructor(){this.SYNC_QUEUE_KEY="fnote_sync_queue",this.MAX_RETRIES=3}};window.addEventListener("online",()=>{console.log("Back online, syncing..."),a.syncIfOnline()}),window.addEventListener("offline",()=>{console.log("Offline mode")})},2941:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=r(5587),n=Symbol.for("react.element"),l=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,i=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function d(e,t,r){var a,l={},d=null,c=null;for(a in void 0!==r&&(d=""+r),void 0!==t.key&&(d=""+t.key),void 0!==t.ref&&(c=t.ref),t)s.call(t,a)&&!o.hasOwnProperty(a)&&(l[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===l[a]&&(l[a]=t[a]);return{$$typeof:n,type:e,key:d,ref:c,props:l,_owner:i.current}}t.Fragment=l,t.jsx=d,t.jsxs=d},587:function(e,t,r){"use strict";e.exports=r(2941)},9330:function(e,t,r){e.exports=r(859)}},function(e){e.O(0,[399,258,744],function(){return e(e.s=2071)}),_N_E=e.O()}]);